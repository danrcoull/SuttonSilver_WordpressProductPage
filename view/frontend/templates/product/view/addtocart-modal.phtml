<div class="modal fade" id="addtocartmodal" tabindex="-1" role="dialog" aria-hidden="true"  aria-labelledby="addtocartmodal">
    <div class="modal-dialog modal-lg" role="document">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <div class="modal-content">

            <div class="modal-body page-main">

                <div class="columns two-columns2">
                    <div class="column main">
                        <div class="page-title-wrapper product">
                            <h2>Configure Your Course</h2>
                        </div>
                        <div class="wp-content">
                            <?php echo $block->getChildHtml('product.info.simples',true); ?>
                            <?php echo $block->getChildHtml('product.info.addons',true); ?>
                        </div>
                    </div>
                    <div class="sidebar sidebar-main">
                        <?php echo $block->getChildHtml('product_form_sidebar'); ?>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="termsModal" class="modal fade modal-child" data-backdrop-limit="1" tabindex="-1" role="dialog" aria-labelledby="termsModal" aria-hidden="true" data-modal-parent="#addtocartmodal">
    <div class="modal-dialog">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <div class="modal-content">
            <div class="modal-body">
                <div class="modal-inner-shadow">
                    <h3><?php echo __('Terms &amp; Conditions'); ?></h3>
                    <div class="content">
                        <?php echo $block->getChildHtml('product.info.terms',true); ?>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div id="termsModalAdd" class="modal fade modal-child" data-backdrop-limit="1" tabindex="-1" role="dialog" aria-labelledby="termsModalAdd" aria-hidden="true" data-modal-parent="#addtocartmodal">
    <div class="modal-dialog">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
        <div class="modal-content">
            <div class="modal-body">
                <div class="modal-inner-shadow">
                    <div class="text text-center">
                        <h3 class="title"><span class="inline">Before you add this to your basket, you must agree to our</span> <span class="underline-text"><a href="#termsModal" role="button" data-target="#termsModal" data-toggle="modal">terms and conditions </a></span></h3>
                        <div class="subtitle error">
                            <span><i class="fa fa-exclamation-triangle" aria-hidden="true"></i><?php echo __("These must be accepted by the user."); ?></span>
                        </div>
                        <a href="" class="btn-green-solid agree"><span>Agree and Add to Basket</span></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>// <![CDATA[
    require([
        'jquery',
        'bootstrap/datepicker'
    ], function ($) {



        $('.modal-child').on('show.bs.modal', function () {
            var modalParent = $(this).attr('data-modal-parent');
            $(modalParent).css('opacity', 0);
        });

        $('.modal-child').on('hidden.bs.modal', function () {
            var modalParent = $(this).attr('data-modal-parent');
            $(modalParent).css('opacity', 1);
            if ($('body').hasClass('modal-open') == false) {
                $('body').addClass('modal-open');
            };
        });

        $("#addtocartmodal *[data-options-id]").each(function(){
            var optionsid = $(this).attr('data-options-id');
            $('.bundle-option-'+optionsid).find(':selected').each(function(){
                id =$(this).val();
                $("#addtocartmodal tr[data-option-id='"+id+"']").addClass('selected');
            });

        });


        $('.induction .yes-no-wrapper a').on('click',function(event){
            event.preventDefault();

            if($(this).hasClass('active') == false)
            {
                $('.induction .yes-no-wrapper a').removeClass('active');
                $(this).addClass('active');
                if($(this).text() == 'Yes')
                {
                    $('#datetimepicker12').data("DateTimePicker").destroy();
                    $('#datetimepicker12').datetimepicker2({
                        inline: true,
                        sideBySide: true,
                        format: "dd MM yyyy"
                    });

                    $("#datetimepicker12").on("dp.change", function(e) {
                        console.log(e.date);
                        select = $( "legend span:contains('Introduction Date')" ).parent().find('select');
                        console.log(select);
                    });

                }else{
                    $('#datetimepicker12').data("DateTimePicker").destroy();
                }
            }

        });

        var agreed = false;
        $('#product_addtocart_form').on('submit', function(event)
        {
            if(agreed == false) {
                $('#termsModalAdd').modal('show');
                event.preventDefault();
            }
        });

        $('#termsModalAdd .agree').on('click',function(event){
            agreed = true;
            event.preventDefault();
            $('#product_addtocart_form').submit();
            event.preventDefault();
        });

    });
    // ]]>
</script>